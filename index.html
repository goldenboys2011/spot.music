<!DOCTYPE html>
<html lang="en">
<head>
    <title>Spot.music</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: white;
            text-align: center;
        }
        .navbar {
            background-color: #333;
            overflow: hidden;
            padding: 10px;
        }
        .navbar a {
            color: white;
            text-decoration: none;
            padding: 14px 20px;
            display: inline-block;
        }
        .navbar a:hover {
            background-color: #575757;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 80vh;
        }
        .player {
            background: #222;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="navbar">
        <center>
            <a href="#home">Home</a>
            <a href="#playlist">Playlist</a>
            <a href="#about">About</a>
        </center>
    </div>
    <div style="background-color: rgba(48, 47, 47, 0.705);">
        <center>
            <h1>
                Spot.music
            </h1>
        </center>
    </div>
    <div class="container">
        <div class="player">
            <center>
                <h2>Music Player</h2>
                <audio src="https://rabbit-nights-collect-automobiles.trycloudflare.com/stream">
                <div id="now-playing" style="margin-top: 15px;">Loading current song...</div>
            </center>
        </div>
    </div>
    <script>
    async function fetchSongTitle() {
        try {
            const response = await fetch('https://rabbit-nights-collect-automobiles.trycloudflare.com/status-json.xsl');
            const data = await response.json();

            // Find the mount point you're streaming from
            const source = data.icestats.source;

            // If there's more than one source, handle that
            const song = Array.isArray(source)
                ? source.find(mount => mount.listenurl.includes("/stream"))
                : source;

            const title = song && song.title ? song.title : "No song info available";
            document.getElementById("now-playing").innerText = `Now Playing: ${title}`;
        } catch (error) {
            console.error("Error fetching song title:", error);
            document.getElementById("now-playing").innerText = "Could not load song info";
        }
    }

    // Call every 10 seconds to update
    setInterval(fetchSongTitle, 10000);
    fetchSongTitle(); // initial call
</script>
</body>
</html>
